{"version":3,"sources":["packages/rock-builder/Tools/GroupTools.tsx","packages/rock-builder/Tools/GuideLine.tsx","packages/rock-builder/Groups/AndGroup.tsx","packages/rock-builder/Groups/OrGroup.tsx","packages/rock-builder/Tools/SplitLine.tsx","packages/rock-builder/Tools/RuleTools.tsx","packages/rock-builder/Rules/ActionRule.tsx","packages/rock-builder/Rules/RangeRule.tsx","packages/rock-builder/Rules/UserActionRule.tsx","packages/rock-builder/Rules/TopicActionRule.tsx","packages/rock-builder/Framework/Entry.tsx","packages/rock-builder/Domain/Rule.ts","packages/rock-builder/Domain/Group.ts","packages/rock-builder/utils/traverse.ts","packages/rock-builder/Framework/index.tsx","packages/rock-builder/index.js","App.tsx","serviceWorker.ts","index.tsx"],"names":["GroupTools","_this","this","type","props","react_default","a","createElement","FilterContext","Consumer","context","className","button_group","button_button","onClick","changeNodeType","node","dropdown","trigger","overlay","menu","item","addNode","key","MenuItem_default","icon","removeNode","collopaseNode","React","Component","GuideLine","AndGroup","_this$props","list","style","marginLeft","react","GroupTools_GroupTools","map","index","Entry_Entry","OrGroup","console","info","length","SplitLine","RuleTools","copyeNode","margin","ActionRule","action","range","RuleTools_RuleTools","RangeRule","from","to","input","width","value","UserActionRule","_node$detail","detail","target","es_select","id","TopicActionRule","_ref","Null","Entry","_this$props$node","NodeComponent","UserActionRule_UserActionRule","TopicActionRule_TopicActionRule","RangeRule_RangeRule","tree","moveNode","Rule","parent","Object","classCallCheck","TypeError","Group","assignParentNode","root","conditions","walk","walker","i","createContext","Framework","possibleConstructorReturn","getPrototypeOf","call","push","forceUpdate","state","filter","arguments","undefined","group","findIndex","t","splice","filters","Provider","sample","selectList","source","comment","App","rock_builder","Boolean","window","location","hostname","match","ReactDOM","render","src_App","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.chunk.js","sourcesContent":["import React, { ReactNode } from \"react\";\nimport Entry from \"../Framework/Entry\";\nimport { FilterContext } from \"../Framework\";\nimport ButtonGroup from \"antd/es/button/button-group\";\nimport Button from \"antd/es/button/button\";\nimport Dropdown from \"antd/es/dropdown/dropdown\";\nimport { Icon, Menu } from \"antd\";\nimport MenuItem from \"antd/lib/menu/MenuItem\";\nimport \"./index.css\";\n\ninterface Props {\n  type: string;\n  node: any;\n}\n\nexport default class GroupTools extends React.Component<Props, object> {\n  render(): ReactNode {\n    const { type } = this.props;\n\n    return (\n      <FilterContext.Consumer>\n        {(context: any) => {\n          return (\n            <div className=\"group-tool\">\n              <ButtonGroup>\n                <Button\n                  onClick={() =>\n                    context.changeNodeType(this.props.node, \"FILTER_AND\")\n                  }\n                  type={type === \"FILTER_AND\" ? \"primary\" : \"default\"}\n                >\n                  且\n                </Button>\n                <Button\n                  onClick={() =>\n                    context.changeNodeType(this.props.node, \"FILTER_OR\")\n                  }\n                  type={type === \"FILTER_OR\" ? \"primary\" : \"default\"}\n                >\n                  或\n                </Button>\n              </ButtonGroup>\n              &nbsp;&nbsp;\n              <ButtonGroup className=\"ActionBtnGroup\">\n                <Dropdown\n                  trigger={[\"click\"]}\n                  overlay={\n                    <Menu\n                      onClick={item =>\n                        context.addNode(item.key, this.props.node)\n                      }\n                    >\n                      <MenuItem key=\"rule\">\n                        <span className=\"TypeLabel\">规则</span>\n                      </MenuItem>\n                      <MenuItem key=\"group\">\n                        <span className=\"TypeLabel\">规则组</span>\n                      </MenuItem>\n                    </Menu>\n                  }\n                >\n                  <Button>\n                    <Icon type=\"plus\" />\n                    <span>添加</span>\n                    <Icon type=\"down\" />\n                  </Button>\n                </Dropdown>\n                <Button icon=\"delete\" type=\"danger\" onClick={() => context.removeNode(this.props.node)} >\n                  <span>删除组</span>\n                </Button>\n                <Button\n                  onClick={() => {\n                    context.collopaseNode(this.props.node);\n                  }}\n                >\n                  拆分\n                </Button>\n              </ButtonGroup>\n            </div>\n          );\n        }}\n      </FilterContext.Consumer>\n    );\n  }\n}\n","import React from 'react'\n\nimport './index.css'\n\nexport default function () {\n  return <div className=\"Guideline\" />\n}\n","import React, { ReactNode, Fragment } from \"react\";\nimport { DragSource, DropTarget } from \"react-dnd\";\nimport { TYPES } from \"../utils/constants\";\nimport { FilterContext } from '../Framework'\nimport Entry from \"../Framework/Entry\";\nimport GroupTools from \"../Tools/GroupTools\";\nimport \"./index.css\";\nimport GuideLine from \"../Tools/GuideLine\";\nimport SplitLine from \"../Tools/SplitLine\";\n\ninterface Props {\n  node: {\n    type: string;\n    list: {\n      type: string;\n      list: object[];\n    }[];\n  };\n  text: any;\n}\n\nexport default class AndGroup extends React.Component<Props, object> {\n  render(): ReactNode {\n    const {\n      node,\n      node: { list },\n    } = this.props;\n    if (!list) {\n      return null;\n    }\n\n    return (\n        <div style={{ marginLeft: 40 }} className=\"group\">\n          <Fragment>\n            <GroupTools type=\"FILTER_AND\" node={node} />\n            <div>\n              <GuideLine />\n              {list.map((item, index) => {\n                const ret = [<Entry node={item} key={index} />];\n                return ret;\n              })}\n            </div>\n          </Fragment>\n        </div>\n    );\n  }\n}\n\n","import React, {ReactNode} from 'react'\nimport Entry from '../Framework/Entry'\nimport GroupTools from \"../Tools/GroupTools\";\nimport './index.css'\nimport GuideLine from \"../Tools/GuideLine\";\nimport SplitLine from \"../Tools/SplitLine\";\n\ninterface Props {\n  node: {\n    type: string\n    list: {\n      type: string\n      list: object[]\n    }[]\n  }\n}\n\nexport default class OrGroup extends React.Component<Props, object> {\n  render() : ReactNode {\n    const { node, node: {list} } = this.props;\n    if (!list) {\n      return null\n    }\n\n    console.info('render')\n\n    if (list.length === 0) {\n      console.info(33333333)\n    }\n\n    return (\n      <div style={{ marginLeft: 40 }} className=\"group\" >\n        {/*<SplitLine/>*/}\n        <GroupTools type=\"FILTER_OR\" node={node} />\n        <div>\n          <GuideLine/>\n          {\n            list.map((item, index) => {\n              const ret = [<Entry node={item} key={index} />]\n              // if (index !== 0) {\n              //   ret.unshift(<span>或</span>)\n              // }\n              return ret\n            })\n          }\n        </div>\n      </div>\n    )\n  }\n}\n","import React from 'react'\n\nimport './index.css'\n\nexport default function () {\n  return <div className=\"Splitline\" />\n}\n","import React, { ReactNode } from \"react\";\nimport Entry from \"../Framework/Entry\";\nimport ButtonGroup from \"antd/es/button/button-group\";\nimport Button from \"antd/es/button/button\";\nimport \"./index.css\";\nimport { FilterContext } from \"../Framework\";\n\ninterface Props {\n  node: any\n}\n\nexport default class RuleTools extends React.Component<Props, object> {\n  render(): ReactNode {\n    return (\n      <FilterContext.Consumer>\n        {(context: any) => {\n          return (\n            <ButtonGroup>\n              <Button icon=\"copy\" onClick={() => context.copyeNode(this.props.node)}  />\n              <Button icon=\"delete\" type=\"danger\" onClick={() => context.removeNode(this.props.node)} />\n              <Button\n                onClick={() => {\n                  context.collopaseNode(this.props.node);\n                }}\n              >\n                <span style={{ margin: \"0 -6px\" }}>拆</span>\n              </Button>\n            </ButtonGroup>\n          );\n        }}\n      </FilterContext.Consumer>\n    );\n  }\n}\n","import React, {ReactNode} from 'react'\nimport Entry from '../Framework/Entry'\nimport SplitLine from \"../Tools/SplitLine\";\nimport RuleTools from \"../Tools/RuleTools\";\n\ninterface Props {\n  node: {\n    action: object\n    range?: object\n  }\n}\n\nexport default class ActionRule extends React.Component<Props, object> {\n  render() : ReactNode {\n    const { node } = this.props;\n    const { action, range } = node;\n\n    if (range) {\n      return (\n        <div className=\"rule-tool\">\n          <SplitLine />\n          <Entry node={action} />\n          <Entry node={range} />\n          <RuleTools node={this.props.node} />\n        </div>\n      )\n    }\n\n    return (\n      <div className=\"rule-tool\">\n        <SplitLine/>\n        <Entry node={action} />\n        <RuleTools node={this.props.node} />\n      </div>\n    )\n  }\n}\n","import React, {ReactNode} from 'react'\nimport { Select, Input } from 'antd'\n\ninterface Props {\n  node: {\n    type: string\n    from: {\n      type: string\n      value: string | number\n    }\n    to: {\n      type: string\n      value: string | number\n    }\n  }\n}\n\nexport default class RangeRule extends React.Component<Props, object> {\n  render() : ReactNode {\n    const { node } = this.props;\n\n    if (!node) {\n      return null\n    }\n\n    const { from, to } = node;\n\n    return (\n      <span >\n        从&nbsp;&nbsp;\n        <Input style={{ width: 100 }} value={from.value} />\n        &nbsp;&nbsp;到&nbsp;&nbsp;\n        <Input style={{ width: 100 }} value={to.value} />\n        &nbsp;&nbsp;\n      </span>\n    )\n  }\n}\n","import React, {ReactNode} from 'react'\nimport { Select, Input } from 'antd'\nimport RuleTools from \"../Tools/RuleTools\";\n\ninterface Props {\n  node: {\n    type: string\n    detail: {\n      action: {\n        id: number | string\n      }\n      target: {\n        id: number | string\n      }\n    }\n  }\n}\n\nexport default class UserActionRule extends React.Component<Props, object> {\n  render() : ReactNode {\n    const { node } = this.props;\n    const { action, target } = node.detail;\n\n    return (\n      <span>\n        对用户&nbsp;&nbsp;\n        <Select value={target.id} />\n        &nbsp;&nbsp;\n        做了\n        &nbsp;&nbsp;\n        <Select value={action.id} />\n        &nbsp;&nbsp;\n      </span>\n    )\n  }\n}\n","import React, {ReactNode} from 'react'\nimport { Select, Input } from 'antd'\nimport RuleTools from \"../Tools/RuleTools\";\n\ninterface Props {\n  node: {\n    type: string\n    detail: {\n      action: {\n        id: number | string\n      }\n      target: {\n        id: number | string\n      }\n    }\n  }\n}\n\nexport default class TopicActionRule extends React.Component<Props, object> {\n  render() : ReactNode {\n    const { action, target } = this.props.node.detail || { action: { id: 0 }, target: { id: 0 } };\n\n    return (\n      <span>\n        对话题&nbsp;&nbsp;\n        <Select value={target.id} />\n        &nbsp;&nbsp;\n        做了\n        &nbsp;&nbsp;\n        <Select value={action.id} />\n        &nbsp;&nbsp;\n      </span>\n    )\n  }\n}\n","import React, {ComponentClass, Fragment, ReactNode} from 'react'\nimport AndGroup from '../Groups/AndGroup'\nimport OrGroup from '../Groups/OrGroup'\nimport { FilterContext } from './index'\n\n\nimport ActionRule from '../Rules/ActionRule'\nimport RangeRule from '../Rules/RangeRule'\nimport UserActionRule from '../Rules/UserActionRule'\nimport TopicActionRule from '../Rules/TopicActionRule'\n\ninterface Props {\n  node: any\n}\n\nfunction Null () {\n  return null\n}\n\nexport default class Entry extends React.Component<Props, object> {\n  render() : ReactNode {\n    const { type, list } = this.props.node;\n    if (!type) {\n      return null\n    }\n\n    let NodeComponent: any = Null;\n\n    if (type === 'FILTER_AND') {\n      NodeComponent = AndGroup\n    }\n\n    if (type === 'FILTER_OR') {\n      NodeComponent = OrGroup\n    }\n    if (type === 'FILTER_NODE') {\n      // 现在只有action一种\n      NodeComponent = ActionRule\n    }\n\n    /**\n     * 上面这三种实际上是核心类型，可以进行拖拽\n     * 下面的几种是根据业务场景设计的组件\n     */\n\n    if (type === 'USER_ACTION') {\n      return <UserActionRule node={this.props.node} />\n    }\n    if (type === 'TOPIC_ACTION') {\n      return <TopicActionRule node={this.props.node} />\n    }\n    if (type === 'RANGE') {\n      return <RangeRule node={this.props.node} />\n    }\n\n    return (\n      <FilterContext.Consumer>\n        {({ tree, moveNode }) => (\n          React.createElement(NodeComponent, {\n            node: this.props.node,\n            moveNode,\n          })\n        )}\n      </FilterContext.Consumer>\n    )\n  }\n}\n","export default class Rule {\n  constructor(type: string, parent: any) {\n    this.parent = parent;\n    if (type === \"TOPIC_ACTION\") {\n      this.action.type = \"TOPIC_ACTION\";\n    } else if (type === \"USER_ACTION\") {\n      this.action.type = \"USER_ACTION\";\n    } else {\n      throw TypeError(\"Unexpected type for Rule constructor\");\n    }\n  }\n\n  type = \"FILTER_NODE\";\n  parent = null;\n  action = {\n    type: \"TOPIC_ACTION\",\n    detail: null\n  };\n}\n","export default class Group {\n  constructor(type: string, parent: any) {\n    this.parent = parent\n    if (type === \"FILTER_AND\") {\n      this.type = \"FILTER_AND\";\n    } else if (type === \"FILTER_OR\") {\n      this.type = \"FILTER_OR\";\n    } else {\n      throw TypeError(\"Unexpected type for Group constructor\");\n    }\n  }\n\n  parent = null;\n  type = \"FILTER_OR\";\n  list: any[] = [];\n}\n","const traverse = (ast: any, options: any) => {\n  return ast;\n};\n\nexport default traverse;\n//\n// export const cutNode = (root: any, node: any) => {\n//   let visitor = root\n//   while(visitor) {\n//\n//     visitor = visitor.\n//   }\n// }\n\nexport const assignParentNode = (root: any) => {\n  let node = root.conditions;\n\n  function walk(walker: any) {\n    if (walker.list) {\n      for (let i = 0; i < walker.list.length; i++) {\n        walker.list[i].parent = walker;\n        walk(walker.list[i]);\n      }\n    }\n  }\n\n  if (node.list) {\n    node.parent = root;\n  }\n\n  walk(node);\n\n  return root;\n};\n","import React, { ReactNode, createContext } from \"react\";\nimport cloneDeep from 'lodash/cloneDeep'\nimport { DragDropContext, DragDropContextProvider } from \"react-dnd\";\nimport HTML5Backend from \"react-dnd-html5-backend\";\nimport Entry from \"./Entry\";\nimport Rule from \"../Domain/Rule\";\nimport Group from \"../Domain/Group\";\nimport { assignParentNode } from \"../utils/traverse\";\n\ninterface Props {\n  filters: {\n    type: string;\n    conditions: {\n      type: string;\n    };\n  };\n}\n\ninterface State {\n  tree: any;\n  moveNode: any;\n  addNode: any;\n  collopaseNode: any;\n  changeNodeType: any;\n  removeNode: any;\n  copyeNode: any;\n}\n\nexport const FilterContext = createContext({\n  tree: null,\n  moveNode: (from: any, to: any) => {}\n});\n\nexport default class Framework extends React.Component<Props, State> {\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      tree: assignParentNode(props.filters),\n      moveNode: this.moveNode,\n      addNode: this.addNode,\n      collopaseNode: this.collopaseNode,\n      removeNode: this.removeNode,\n      copyeNode: this.copyeNode,\n      changeNodeType: this.changeNodeType\n    };\n  }\n  moveNode = (from: any, to: any) => {\n    console.info(from, to);\n  };\n  addNode = (node: string, to: any) => {\n    if (node === \"rule\") {\n      to.list.push(new Rule(\"TOPIC_ACTION\", to));\n      this.forceUpdate();\n    } else if (node === \"group\") {\n      to.list.push(new Group(\"FILTER_OR\", to));\n      console.info(this.state)\n      this.forceUpdate();\n    } else {\n      throw TypeError(\"Unexpected node type, cannot be inserted\");\n    }\n    this.forceUpdate();\n  };\n  collopaseNode = (node: any, filter: string = \"FILTER_OR\") => {\n    const group = new Group(filter, node.parent);\n    const index = node.parent.list.findIndex((t: any) => t === node);\n    if (node.type === \"FILTER_NODE\") {\n      node.parent.list[index] = group;\n      group.list = [node];\n      node.parent = group;\n    } else {\n      node.parent.list[index] = group;\n      group.list = [node];\n      node.parent = group;\n    }\n    this.forceUpdate();\n  };\n  changeNodeType = (node: any, type: string) => {\n    node.type = type;\n    this.forceUpdate();\n  };\n  removeNode = (node: any) => {\n    const index = node.parent.list.findIndex((t: any) => t === node);\n    node.parent.list.splice(index, 1);\n    this.forceUpdate();\n  };\n  copyeNode = (node: any) => {\n    const index = node.parent.list.findIndex((t: any) => t === node);\n    console.info(node)\n    node.parent.list.splice(index, 0, {\n      type: 'FILTER_NODE',\n      action: node.action,\n      range: node.range,\n      parent: node.parent,\n    });\n    this.forceUpdate();\n  };\n\n  render(): ReactNode {\n    const { conditions } = this.state.tree;\n    if (!conditions) {\n      return null;\n    }\n\n    return (\n      <div>\n        <FilterContext.Provider value={this.state}>\n          <Entry node={conditions} />\n        </FilterContext.Provider>\n      </div>\n    );\n  }\n}\n","import Framework from './Framework/index'\n\nexport default Framework\n","import React, { Component } from 'react';\nimport FilterBuidler from './packages/rock-builder/index'\nimport logo from './logo.svg';\nimport 'antd/dist/antd.min.css'\n\n\nconst sample = {\n  type: \"SELECT\",\n  selectList: [\n    {\n      type: \"COUNT\"\n    }\n  ],\n  source: {\n    type: \"SOURCE_LIST\",\n    source: [\n      {\n        type: \"SOURCE_NODE\",\n        id: \"233\"\n      }\n    ],\n    filters: {\n      type: \"WHERE\",\n      conditions: {\n        type: \"FILTER_AND\",\n        list: [\n          {\n            type: \"FILTER_OR\",\n            list: [\n              {\n                type: \"FILTER_NODE\",\n                action: {\n                  type: \"USER_ACTION\",\n                  detail: {\n                    action: {\n                      type: \"ID_NODE\",\n                      id: \"1\"\n                    },\n                    target: {\n                      type: \"ID_NODE\",\n                      id: \"2\",\n                      comment: \"你是不是傻报表\"\n                    }\n                  }\n                },\n                range: {\n                  type: \"RANGE\",\n                  from: {\n                    type: \"TIMESTAMP\",\n                    value: 123\n                  },\n                  to: {\n                    type: \"TIMESTAMP\",\n                    value: 456\n                  }\n                }\n              },\n              {\n                type: \"FILTER_NODE\",\n                action: {\n                  type: \"USER_ACTION\",\n                  detail: {\n                    action: {\n                      type: \"ID_NODE\",\n                      id: \"13\"\n                    },\n                    target: {\n                      type: \"ID_NODE\",\n                      id: \"23\"\n                    }\n                  }\n                },\n                range: {\n                  type: \"RANGE\",\n                  from: {\n                    type: \"DATE\",\n                    value: \"2134123\"\n                  },\n                  to: {\n                    type: \"DATE\",\n                    value: \"23432434\"\n                  }\n                }\n              }\n            ]\n          },\n          {\n            type: \"FILTER_OR\",\n            list: [\n              {\n                type: \"FILTER_NODE\",\n                action: {\n                  type: \"USER_ACTION\",\n                  detail: {\n                    action: {\n                      type: \"ID_NODE\",\n                      id: \"4\"\n                    },\n                    target: {\n                      type: \"ID_NODE\",\n                      id: \"5\"\n                    }\n                  }\n                }\n              },\n              {\n                type: \"FILTER_NODE\",\n                action: {\n                  type: \"USER_ACTION\",\n                  detail: {\n                    action: {\n                      type: \"ID_NODE\",\n                      id: \"7\"\n                    },\n                    target: {\n                      type: \"ID_NODE\",\n                      id: \"8\"\n                    }\n                  }\n                }\n              },\n              {\n                type: \"FILTER_NODE\",\n                action: {\n                  type: \"TOPIC_ACTION\",\n                  detail: {\n                    action: {\n                      type: \"ID_NODE\",\n                      id: \"7\"\n                    },\n                    target: {\n                      type: \"ID_NODE\",\n                      id: \"8\"\n                    }\n                  }\n                }\n              },\n              {\n                type: \"FILTER_AND\",\n                list: [\n                  {\n                    type: \"FILTER_NODE\",\n                    action: {\n                      type: \"TOPIC_ACTION\",\n                      detail: {\n                        action: {\n                          type: \"ID_NODE\",\n                          id: \"7\"\n                        },\n                        target: {\n                          type: \"ID_NODE\",\n                          id: \"8\"\n                        }\n                      }\n                    }\n                  },\n                  {\n                    type: \"FILTER_NODE\",\n                    action: {\n                      type: \"TOPIC_ACTION\",\n                      detail: {\n                        action: {\n                          type: \"ID_NODE\",\n                          id: \"7\"\n                        },\n                        target: {\n                          type: \"ID_NODE\",\n                          id: \"8\"\n                        }\n                      }\n                    }\n                  }\n                ]\n              }\n            ]\n          }\n        ]\n      }\n    }\n  }\n};\n\nclass App extends Component {\n  render() {\n    return (\n      <div className=\"App\">\n        <FilterBuidler filters={sample.source.filters} />\n      </div>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}