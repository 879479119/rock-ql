{"version":3,"sources":["packages/rock-builder/Tools/GroupTools.tsx","packages/rock-builder/Tools/GuideLine.tsx","packages/rock-builder/Groups/AndGroup.tsx","packages/rock-builder/Groups/OrGroup.tsx","packages/rock-builder/Tools/SplitLine.tsx","packages/rock-builder/Tools/RuleTools.tsx","packages/rock-builder/Rules/ActionRule.tsx","packages/rock-builder/Rules/RangeRule.tsx","packages/rock-builder/Rules/UserActionRule.tsx","packages/rock-builder/Rules/TopicActionRule.tsx","packages/rock-builder/Framework/Entry.tsx","packages/rock-builder/Domain/Rule.ts","packages/rock-builder/Domain/Group.ts","packages/rock-builder/utils/traverse.ts","packages/rock-builder/Framework/index.tsx","packages/rock-builder/index.js","App.tsx","serviceWorker.ts","index.tsx"],"names":["GroupTools","_this","this","type","props","react_default","a","createElement","FilterContext","Consumer","context","className","button_group","button_button","onClick","changeNodeType","node","dropdown","trigger","overlay","menu","item","addNode","key","MenuItem_default","icon","removeNode","collapseNode","React","Component","GuideLine","AndGroup","_this$props","list","style","marginLeft","react","GroupTools_GroupTools","map","index","Entry_Entry","OrGroup","SplitLine","RuleTools","copyNode","margin","ActionRule","action","range","RuleTools_RuleTools","RangeRule","from","to","input","width","value","UserActionRule","_node$detail","detail","target","es_select","id","TopicActionRule","_ref","Null","Entry","_this$props$node","NodeComponent","UserActionRule_UserActionRule","TopicActionRule_TopicActionRule","RangeRule_RangeRule","tree","moveNode","Rule","parent","Object","classCallCheck","TypeError","Group","assignParentNode","root","conditions","walk","walker","i","length","createContext","Framework","possibleConstructorReturn","getPrototypeOf","call","push","forceUpdate","filter","arguments","undefined","group","findIndex","t","splice","state","filters","Provider","sample","selectList","source","comment","App","rock_builder","Boolean","window","location","hostname","match","ReactDOM","render","src_App","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.chunk.js","sourcesContent":["import React, { ReactNode } from \"react\";\nimport Entry from \"../Framework/Entry\";\nimport { FilterContext } from \"../Framework\";\nimport ButtonGroup from \"antd/es/button/button-group\";\nimport Button from \"antd/es/button/button\";\nimport Dropdown from \"antd/es/dropdown/dropdown\";\nimport { Icon, Menu } from \"antd\";\nimport MenuItem from \"antd/lib/menu/MenuItem\";\nimport \"./index.css\";\n\ninterface Props {\n  type: string;\n  node: any;\n}\n\nexport default class GroupTools extends React.Component<Props, object> {\n  render(): ReactNode {\n    const { type } = this.props;\n\n    return (\n      <FilterContext.Consumer>\n        {(context: any) => {\n          return (\n            <div className=\"group-tool\">\n              <ButtonGroup>\n                <Button\n                  onClick={() =>\n                    context.changeNodeType(this.props.node, \"FILTER_AND\")\n                  }\n                  type={type === \"FILTER_AND\" ? \"primary\" : \"default\"}\n                >\n                  且\n                </Button>\n                <Button\n                  onClick={() =>\n                    context.changeNodeType(this.props.node, \"FILTER_OR\")\n                  }\n                  type={type === \"FILTER_OR\" ? \"primary\" : \"default\"}\n                >\n                  或\n                </Button>\n              </ButtonGroup>\n              &nbsp;&nbsp;\n              <ButtonGroup className=\"ActionBtnGroup\">\n                <Dropdown\n                  trigger={[\"click\"]}\n                  overlay={\n                    <Menu\n                      onClick={item =>\n                        context.addNode(item.key, this.props.node)\n                      }\n                    >\n                      <MenuItem key=\"rule\">\n                        <span className=\"TypeLabel\">规则</span>\n                      </MenuItem>\n                      <MenuItem key=\"group\">\n                        <span className=\"TypeLabel\">规则组</span>\n                      </MenuItem>\n                    </Menu>\n                  }\n                >\n                  <Button>\n                    <Icon type=\"plus\" />\n                    <span>添加</span>\n                    <Icon type=\"down\" />\n                  </Button>\n                </Dropdown>\n                <Button icon=\"delete\" type=\"danger\" onClick={() => context.removeNode(this.props.node)} >\n                  <span>删除组</span>\n                </Button>\n                <Button\n                  onClick={() => {\n                    context.collapseNode(this.props.node);\n                  }}\n                >\n                  拆分\n                </Button>\n              </ButtonGroup>\n            </div>\n          );\n        }}\n      </FilterContext.Consumer>\n    );\n  }\n}\n","import React from 'react'\n\nimport './index.css'\n\nexport default function () {\n  return <div className=\"Guideline\" />\n}\n","import React, { ReactNode, Fragment } from \"react\";\nimport { DragSource, DropTarget } from \"react-dnd\";\nimport { TYPES } from \"../utils/constants\";\nimport { FilterContext } from '../Framework'\nimport Entry from \"../Framework/Entry\";\nimport GroupTools from \"../Tools/GroupTools\";\nimport \"./index.css\";\nimport GuideLine from \"../Tools/GuideLine\";\nimport SplitLine from \"../Tools/SplitLine\";\n\ninterface Props {\n  node: {\n    type: string;\n    list: {\n      type: string;\n      list: object[];\n    }[];\n  };\n  text: any;\n}\n\nexport default class AndGroup extends React.Component<Props, object> {\n  render(): ReactNode {\n    const {\n      node,\n      node: { list },\n    } = this.props;\n    if (!list) {\n      return null;\n    }\n\n    return (\n        <div style={{ marginLeft: 40 }} className=\"group\">\n          <Fragment>\n            <GroupTools type=\"FILTER_AND\" node={node} />\n            <div>\n              <GuideLine />\n              {list.map((item, index) => {\n                const ret = [<Entry node={item} key={index} />];\n                return ret;\n              })}\n            </div>\n          </Fragment>\n        </div>\n    );\n  }\n}\n\n","import React, {ReactNode} from 'react'\nimport Entry from '../Framework/Entry'\nimport GroupTools from \"../Tools/GroupTools\";\nimport './index.css'\nimport GuideLine from \"../Tools/GuideLine\";\nimport SplitLine from \"../Tools/SplitLine\";\n\ninterface Props {\n  node: {\n    type: string\n    list: {\n      type: string\n      list: object[]\n    }[]\n  }\n}\n\nexport default class OrGroup extends React.Component<Props, object> {\n  render() : ReactNode {\n    const { node, node: {list} } = this.props;\n    if (!list) {\n      return null\n    }\n\n    return (\n      <div style={{ marginLeft: 40 }} className=\"group\" >\n        {/*<SplitLine/>*/}\n        <GroupTools type=\"FILTER_OR\" node={node} />\n        <div>\n          <GuideLine/>\n          {\n            list.map((item, index) => {\n              const ret = [<Entry node={item} key={index} />]\n              // if (index !== 0) {\n              //   ret.unshift(<span>或</span>)\n              // }\n              return ret\n            })\n          }\n        </div>\n      </div>\n    )\n  }\n}\n","import React from 'react'\n\nimport './index.css'\n\nexport default function () {\n  return <div className=\"Splitline\" />\n}\n","import React, { ReactNode } from \"react\";\nimport Entry from \"../Framework/Entry\";\nimport ButtonGroup from \"antd/es/button/button-group\";\nimport Button from \"antd/es/button/button\";\nimport \"./index.css\";\nimport { FilterContext } from \"../Framework\";\n\ninterface Props {\n  node: any\n}\n\nexport default class RuleTools extends React.Component<Props, object> {\n  render(): ReactNode {\n    return (\n      <FilterContext.Consumer>\n        {(context: any) => {\n          return (\n            <ButtonGroup>\n              <Button icon=\"copy\" onClick={() => context.copyNode(this.props.node)}  />\n              <Button icon=\"delete\" type=\"danger\" onClick={() => context.removeNode(this.props.node)} />\n              <Button\n                onClick={() => {\n                  context.collapseNode(this.props.node);\n                }}\n              >\n                <span style={{ margin: \"0 -6px\" }}>拆</span>\n              </Button>\n            </ButtonGroup>\n          );\n        }}\n      </FilterContext.Consumer>\n    );\n  }\n}\n","import React, {ReactNode} from 'react'\nimport Entry from '../Framework/Entry'\nimport SplitLine from \"../Tools/SplitLine\";\nimport RuleTools from \"../Tools/RuleTools\";\n\ninterface Props {\n  node: {\n    action: object\n    range?: object\n  }\n}\n\nexport default class ActionRule extends React.Component<Props, object> {\n  render() : ReactNode {\n    const { node } = this.props;\n    const { action, range } = node;\n\n    if (range) {\n      return (\n        <div className=\"rule-tool\">\n          <SplitLine />\n          <Entry node={action} />\n          <Entry node={range} />\n          <RuleTools node={this.props.node} />\n        </div>\n      )\n    }\n\n    return (\n      <div className=\"rule-tool\">\n        <SplitLine/>\n        <Entry node={action} />\n        <RuleTools node={this.props.node} />\n      </div>\n    )\n  }\n}\n","import React, {ReactNode} from 'react'\nimport { Select, Input } from 'antd'\n\ninterface Props {\n  node: {\n    type: string\n    from: {\n      type: string\n      value: string | number\n    }\n    to: {\n      type: string\n      value: string | number\n    }\n  }\n}\n\nexport default class RangeRule extends React.Component<Props, object> {\n  render() : ReactNode {\n    const { node } = this.props;\n\n    if (!node) {\n      return null\n    }\n\n    const { from, to } = node;\n\n    return (\n      <span >\n        从&nbsp;&nbsp;\n        <Input style={{ width: 100 }} value={from.value} />\n        &nbsp;&nbsp;到&nbsp;&nbsp;\n        <Input style={{ width: 100 }} value={to.value} />\n        &nbsp;&nbsp;\n      </span>\n    )\n  }\n}\n","import React, {ReactNode} from 'react'\nimport { Select, Input } from 'antd'\nimport RuleTools from \"../Tools/RuleTools\";\n\ninterface Props {\n  node: {\n    type: string\n    detail: {\n      action: {\n        id: number | string\n      }\n      target: {\n        id: number | string\n      }\n    }\n  }\n}\n\nexport default class UserActionRule extends React.Component<Props, object> {\n  render() : ReactNode {\n    const { node } = this.props;\n    const { action, target } = node.detail;\n\n    return (\n      <span>\n        对用户&nbsp;&nbsp;\n        <Select value={target.id} />\n        &nbsp;&nbsp;\n        做了\n        &nbsp;&nbsp;\n        <Select value={action.id} />\n        &nbsp;&nbsp;\n      </span>\n    )\n  }\n}\n","import React, {ReactNode} from 'react'\nimport { Select, Input } from 'antd'\nimport RuleTools from \"../Tools/RuleTools\";\n\ninterface Props {\n  node: {\n    type: string\n    detail: {\n      action: {\n        id: number | string\n      }\n      target: {\n        id: number | string\n      }\n    }\n  }\n}\n\nexport default class TopicActionRule extends React.Component<Props, object> {\n  render() : ReactNode {\n    const { action, target } = this.props.node.detail || { action: { id: 0 }, target: { id: 0 } };\n\n    return (\n      <span>\n        对话题&nbsp;&nbsp;\n        <Select value={target.id} />\n        &nbsp;&nbsp;\n        做了\n        &nbsp;&nbsp;\n        <Select value={action.id} />\n        &nbsp;&nbsp;\n      </span>\n    )\n  }\n}\n","import React, {ComponentClass, Fragment, ReactNode} from 'react'\nimport AndGroup from '../Groups/AndGroup'\nimport OrGroup from '../Groups/OrGroup'\nimport { FilterContext } from './index'\n\n\nimport ActionRule from '../Rules/ActionRule'\nimport RangeRule from '../Rules/RangeRule'\nimport UserActionRule from '../Rules/UserActionRule'\nimport TopicActionRule from '../Rules/TopicActionRule'\n\ninterface Props {\n  node: any\n}\n\nfunction Null () {\n  return null\n}\n\nexport default class Entry extends React.Component<Props, object> {\n  render() : ReactNode {\n    const { type, list } = this.props.node;\n    if (!type) {\n      return null\n    }\n\n    let NodeComponent: any = Null;\n\n    if (type === 'FILTER_AND') {\n      NodeComponent = AndGroup\n    }\n\n    if (type === 'FILTER_OR') {\n      NodeComponent = OrGroup\n    }\n    if (type === 'FILTER_NODE') {\n      // 现在只有action一种\n      NodeComponent = ActionRule\n    }\n\n    /**\n     * 上面这三种实际上是核心类型，可以进行拖拽\n     * 下面的几种是根据业务场景设计的组件\n     */\n\n    if (type === 'USER_ACTION') {\n      return <UserActionRule node={this.props.node} />\n    }\n    if (type === 'TOPIC_ACTION') {\n      return <TopicActionRule node={this.props.node} />\n    }\n    if (type === 'RANGE') {\n      return <RangeRule node={this.props.node} />\n    }\n\n    return (\n      <FilterContext.Consumer>\n        {({ tree, moveNode }) => (\n          React.createElement(NodeComponent, {\n            node: this.props.node,\n            moveNode,\n          })\n        )}\n      </FilterContext.Consumer>\n    )\n  }\n}\n","export default class Rule {\n  constructor(type: string, parent: any) {\n    this.parent = parent;\n    if (type === \"TOPIC_ACTION\") {\n      this.action.type = \"TOPIC_ACTION\";\n    } else if (type === \"USER_ACTION\") {\n      this.action.type = \"USER_ACTION\";\n    } else {\n      throw TypeError(\"Unexpected type for Rule constructor\");\n    }\n  }\n\n  type = \"FILTER_NODE\";\n  parent = null;\n  action = {\n    type: \"TOPIC_ACTION\",\n    detail: null\n  };\n}\n","export default class Group {\n  constructor(type: string, parent: any) {\n    this.parent = parent\n    if (type === \"FILTER_AND\") {\n      this.type = \"FILTER_AND\";\n    } else if (type === \"FILTER_OR\") {\n      this.type = \"FILTER_OR\";\n    } else {\n      throw TypeError(\"Unexpected type for Group constructor\");\n    }\n  }\n\n  parent = null;\n  type = \"FILTER_OR\";\n  list: any[] = [];\n}\n","const traverse = (ast: any, options: any) => {\n  return ast;\n};\n\nexport default traverse;\n//\n// export const cutNode = (root: any, node: any) => {\n//   let visitor = root\n//   while(visitor) {\n//\n//     visitor = visitor.\n//   }\n// }\n\nexport const assignParentNode = (root: any) => {\n  let node = root.conditions;\n\n  function walk(walker: any) {\n    if (walker.list) {\n      for (let i = 0; i < walker.list.length; i++) {\n        walker.list[i].parent = walker;\n        walk(walker.list[i]);\n      }\n    }\n  }\n\n  if (node.list) {\n    node.parent = root;\n  }\n\n  walk(node);\n\n  return root;\n};\n\n\n\nexport const clearParentNode = (root: any) => {\n  let node = root.conditions;\n\n  function walk(walker: any) {\n    if (walker.list) {\n      for (let i = 0; i < walker.list.length; i++) {\n        delete walker.list[i].parent;\n        walk(walker.list[i]);\n      }\n    }\n  }\n\n  if (node.list) {\n    delete node.parent;\n  }\n\n  walk(node);\n\n  return root;\n};\n","import React, { ReactNode, createContext } from \"react\";\nimport cloneDeep from 'lodash/cloneDeep'\nimport { DragDropContext, DragDropContextProvider } from \"react-dnd\";\nimport HTML5Backend from \"react-dnd-html5-backend\";\nimport Entry from \"./Entry\";\nimport Rule from \"../Domain/Rule\";\nimport Group from \"../Domain/Group\";\nimport { assignParentNode } from \"../utils/traverse\";\n\ninterface Props {\n  filters: {\n    type: string;\n    conditions: {\n      type: string;\n    };\n  };\n}\n\ninterface State {\n  tree: any;\n  moveNode: any;\n  addNode: any;\n  collapseNode: any;\n  changeNodeType: any;\n  removeNode: any;\n  copyNode: any;\n}\n\nexport const FilterContext = createContext({\n  tree: null,\n  moveNode: (from: any, to: any) => {}\n});\n\nexport default class Framework extends React.Component<Props, State> {\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      tree: assignParentNode(props.filters),\n      moveNode: this.moveNode,\n      addNode: this.addNode,\n      collapseNode: this.collapseNode,\n      removeNode: this.removeNode,\n      copyNode: this.copyNode,\n      changeNodeType: this.changeNodeType\n    };\n  }\n  moveNode = (from: any, to: any) => {\n  };\n  addNode = (node: string, to: any) => {\n    if (node === \"rule\") {\n      to.list.push(new Rule(\"TOPIC_ACTION\", to));\n      this.forceUpdate();\n    } else if (node === \"group\") {\n      to.list.push(new Group(\"FILTER_OR\", to));\n      this.forceUpdate();\n    } else {\n      throw TypeError(\"Unexpected node type, cannot be inserted\");\n    }\n    this.forceUpdate();\n  };\n  collapseNode = (node: any, filter: string = \"FILTER_OR\") => {\n    const group = new Group(filter, node.parent);\n    const index = node.parent.list.findIndex((t: any) => t === node);\n    if (node.type === \"FILTER_NODE\") {\n      node.parent.list[index] = group;\n      group.list = [node];\n      node.parent = group;\n    } else {\n      node.parent.list[index] = group;\n      group.list = [node];\n      node.parent = group;\n    }\n    this.forceUpdate();\n  };\n  changeNodeType = (node: any, type: string) => {\n    node.type = type;\n    this.forceUpdate();\n  };\n  removeNode = (node: any) => {\n    const index = node.parent.list.findIndex((t: any) => t === node);\n    node.parent.list.splice(index, 1);\n    this.forceUpdate();\n  };\n  copyNode = (node: any) => {\n    const index = node.parent.list.findIndex((t: any) => t === node);\n    node.parent.list.splice(index, 0, {\n      type: 'FILTER_NODE',\n      action: node.action,\n      range: node.range,\n      parent: node.parent,\n    });\n    this.forceUpdate();\n  };\n\n  render(): ReactNode {\n    const { conditions } = this.state.tree;\n    if (!conditions) {\n      return null;\n    }\n\n    return (\n      <div>\n        <FilterContext.Provider value={this.state}>\n          <Entry node={conditions} />\n        </FilterContext.Provider>\n      </div>\n    );\n  }\n}\n","import Framework from './Framework/index'\n\nexport default Framework\n","import React, { Component } from 'react';\nimport FilterBuidler from './packages/rock-builder/index'\nimport logo from './logo.svg';\nimport 'antd/dist/antd.min.css'\n\n\nconst sample = {\n  type: \"SELECT\",\n  selectList: [\n    {\n      type: \"COUNT\"\n    }\n  ],\n  source: {\n    type: \"SOURCE_LIST\",\n    source: [\n      {\n        type: \"SOURCE_NODE\",\n        id: \"233\"\n      }\n    ],\n    filters: {\n      type: \"WHERE\",\n      conditions: {\n        type: \"FILTER_AND\",\n        list: [\n          {\n            type: \"FILTER_OR\",\n            list: [\n              {\n                type: \"FILTER_NODE\",\n                action: {\n                  type: \"USER_ACTION\",\n                  detail: {\n                    action: {\n                      type: \"ID_NODE\",\n                      id: \"1\"\n                    },\n                    target: {\n                      type: \"ID_NODE\",\n                      id: \"2\",\n                      comment: \"你是不是傻报表\"\n                    }\n                  }\n                },\n                range: {\n                  type: \"RANGE\",\n                  from: {\n                    type: \"TIMESTAMP\",\n                    value: 123\n                  },\n                  to: {\n                    type: \"TIMESTAMP\",\n                    value: 456\n                  }\n                }\n              },\n              {\n                type: \"FILTER_NODE\",\n                action: {\n                  type: \"USER_ACTION\",\n                  detail: {\n                    action: {\n                      type: \"ID_NODE\",\n                      id: \"13\"\n                    },\n                    target: {\n                      type: \"ID_NODE\",\n                      id: \"23\"\n                    }\n                  }\n                },\n                range: {\n                  type: \"RANGE\",\n                  from: {\n                    type: \"DATE\",\n                    value: \"2134123\"\n                  },\n                  to: {\n                    type: \"DATE\",\n                    value: \"23432434\"\n                  }\n                }\n              }\n            ]\n          },\n          {\n            type: \"FILTER_OR\",\n            list: [\n              {\n                type: \"FILTER_NODE\",\n                action: {\n                  type: \"USER_ACTION\",\n                  detail: {\n                    action: {\n                      type: \"ID_NODE\",\n                      id: \"4\"\n                    },\n                    target: {\n                      type: \"ID_NODE\",\n                      id: \"5\"\n                    }\n                  }\n                }\n              },\n              {\n                type: \"FILTER_NODE\",\n                action: {\n                  type: \"USER_ACTION\",\n                  detail: {\n                    action: {\n                      type: \"ID_NODE\",\n                      id: \"7\"\n                    },\n                    target: {\n                      type: \"ID_NODE\",\n                      id: \"8\"\n                    }\n                  }\n                }\n              },\n              {\n                type: \"FILTER_NODE\",\n                action: {\n                  type: \"TOPIC_ACTION\",\n                  detail: {\n                    action: {\n                      type: \"ID_NODE\",\n                      id: \"7\"\n                    },\n                    target: {\n                      type: \"ID_NODE\",\n                      id: \"8\"\n                    }\n                  }\n                }\n              },\n              {\n                type: \"FILTER_AND\",\n                list: [\n                  {\n                    type: \"FILTER_NODE\",\n                    action: {\n                      type: \"TOPIC_ACTION\",\n                      detail: {\n                        action: {\n                          type: \"ID_NODE\",\n                          id: \"7\"\n                        },\n                        target: {\n                          type: \"ID_NODE\",\n                          id: \"8\"\n                        }\n                      }\n                    }\n                  },\n                  {\n                    type: \"FILTER_NODE\",\n                    action: {\n                      type: \"TOPIC_ACTION\",\n                      detail: {\n                        action: {\n                          type: \"ID_NODE\",\n                          id: \"7\"\n                        },\n                        target: {\n                          type: \"ID_NODE\",\n                          id: \"8\"\n                        }\n                      }\n                    }\n                  }\n                ]\n              }\n            ]\n          }\n        ]\n      }\n    }\n  }\n};\n\nclass App extends Component {\n  render() {\n    return (\n      <div className=\"App\">\n        <FilterBuidler filters={sample.source.filters} />\n      </div>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}