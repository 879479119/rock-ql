(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{109:function(e,t,n){e.exports=n(189)},114:function(e,t,n){},189:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),o=n(4),c=n.n(o),i=(n(114),n(8)),l=n(9),p=n(11),u=n(10),s=n(13),d=n(36),E=n(19),m=n(107),O=n(192),y=n(21),f=n(79),N=n.n(f),h=(n(49),function(e){function t(){return Object(i.a)(this,t),Object(p.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props.type;return r.a.createElement(S.Consumer,null,function(n){return r.a.createElement("div",{className:"group-tool"},r.a.createElement(d.a,null,r.a.createElement(E.a,{onClick:function(){return n.changeNodeType(e.props.node,"FILTER_AND")},type:"FILTER_AND"===t?"primary":"default"},"\u4e14"),r.a.createElement(E.a,{onClick:function(){return n.changeNodeType(e.props.node,"FILTER_OR")},type:"FILTER_OR"===t?"primary":"default"},"\u6216")),"\xa0\xa0",r.a.createElement(d.a,{className:"ActionBtnGroup"},r.a.createElement(m.a,{trigger:["click"],overlay:r.a.createElement(O.a,{onClick:function(t){return n.addNode(t.key,e.props.node)}},r.a.createElement(N.a,{key:"rule"},r.a.createElement("span",{className:"TypeLabel"},"\u89c4\u5219")),r.a.createElement(N.a,{key:"group"},r.a.createElement("span",{className:"TypeLabel"},"\u89c4\u5219\u7ec4")))},r.a.createElement(E.a,null,r.a.createElement(y.a,{type:"plus"}),r.a.createElement("span",null,"\u6dfb\u52a0"),r.a.createElement(y.a,{type:"down"}))),r.a.createElement(E.a,{icon:"delete",type:"danger",onClick:function(){return n.removeNode(e.props.node)}},r.a.createElement("span",null,"\u5220\u9664\u7ec4")),r.a.createElement(E.a,{onClick:function(){n.collopaseNode(e.props.node)}},"\u62c6\u5206")))})}}]),t}(r.a.Component)),v=(n(98),function(){return r.a.createElement("div",{className:"Guideline"})}),I=function(e){function t(){return Object(i.a)(this,t),Object(p.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.node,n=e.node.list;return n?r.a.createElement("div",{style:{marginLeft:40},className:"group"},r.a.createElement(a.Fragment,null,r.a.createElement(h,{type:"FILTER_AND",node:t}),r.a.createElement("div",null,r.a.createElement(v,null),n.map(function(e,t){return[r.a.createElement(F,{node:e,key:t})]})))):null}}]),t}(r.a.Component),T=function(e){function t(){return Object(i.a)(this,t),Object(p.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.node,n=e.node.list;return n?(console.info("render"),0===n.length&&console.info(33333333),r.a.createElement("div",{style:{marginLeft:40},className:"group"},r.a.createElement(h,{type:"FILTER_OR",node:t}),r.a.createElement("div",null,r.a.createElement(v,null),n.map(function(e,t){return[r.a.createElement(F,{node:e,key:t})]})))):null}}]),t}(r.a.Component),b=function(){return r.a.createElement("div",{className:"Splitline"})},_=function(e){function t(){return Object(i.a)(this,t),Object(p.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(S.Consumer,null,function(t){return r.a.createElement(d.a,null,r.a.createElement(E.a,{icon:"copy",onClick:function(){return t.copyeNode(e.props.node)}}),r.a.createElement(E.a,{icon:"delete",type:"danger",onClick:function(){return t.removeNode(e.props.node)}}),r.a.createElement(E.a,{onClick:function(){t.collopaseNode(e.props.node)}},r.a.createElement("span",{style:{margin:"0 -6px"}},"\u62c6")))})}}]),t}(r.a.Component),j=function(e){function t(){return Object(i.a)(this,t),Object(p.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.node,t=e.action,n=e.range;return n?r.a.createElement("div",{className:"rule-tool"},r.a.createElement(b,null),r.a.createElement(F,{node:t}),r.a.createElement(F,{node:n}),r.a.createElement(_,{node:this.props.node})):r.a.createElement("div",{className:"rule-tool"},r.a.createElement(b,null),r.a.createElement(F,{node:t}),r.a.createElement(_,{node:this.props.node}))}}]),t}(r.a.Component),R=n(191),C=function(e){function t(){return Object(i.a)(this,t),Object(p.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.node;if(!e)return null;var t=e.from,n=e.to;return r.a.createElement("span",null,"\u4ece\xa0\xa0",r.a.createElement(R.a,{style:{width:100},value:t.value}),"\xa0\xa0\u5230\xa0\xa0",r.a.createElement(R.a,{style:{width:100},value:n.value}),"\xa0\xa0")}}]),t}(r.a.Component),D=n(190),g=function(e){function t(){return Object(i.a)(this,t),Object(p.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.node.detail,t=e.action,n=e.target;return r.a.createElement("span",null,"\u5bf9\u7528\u6237\xa0\xa0",r.a.createElement(D.a,{value:n.id}),"\xa0\xa0 \u505a\u4e86 \xa0\xa0",r.a.createElement(D.a,{value:t.id}),"\xa0\xa0")}}]),t}(r.a.Component),L=function(e){function t(){return Object(i.a)(this,t),Object(p.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.node.detail||{action:{id:0},target:{id:0}},t=e.action,n=e.target;return r.a.createElement("span",null,"\u5bf9\u8bdd\u9898\xa0\xa0",r.a.createElement(D.a,{value:n.id}),"\xa0\xa0 \u505a\u4e86 \xa0\xa0",r.a.createElement(D.a,{value:t.id}),"\xa0\xa0")}}]),t}(r.a.Component);function A(){return null}var F=function(e){function t(){return Object(i.a)(this,t),Object(p.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props.node,n=t.type;t.list;if(!n)return null;var a=A;return"FILTER_AND"===n&&(a=I),"FILTER_OR"===n&&(a=T),"FILTER_NODE"===n&&(a=j),"USER_ACTION"===n?r.a.createElement(g,{node:this.props.node}):"TOPIC_ACTION"===n?r.a.createElement(L,{node:this.props.node}):"RANGE"===n?r.a.createElement(C,{node:this.props.node}):r.a.createElement(S.Consumer,null,function(t){t.tree;var n=t.moveNode;return r.a.createElement(a,{node:e.props.node,moveNode:n})})}}]),t}(r.a.Component),k=function e(t,n){if(Object(i.a)(this,e),this.type="FILTER_NODE",this.parent=null,this.action={type:"TOPIC_ACTION",detail:null},this.parent=n,"TOPIC_ACTION"===t)this.action.type="TOPIC_ACTION";else{if("USER_ACTION"!==t)throw TypeError("Unexpected type for Rule constructor");this.action.type="USER_ACTION"}},w=function e(t,n){if(Object(i.a)(this,e),this.parent=null,this.type="FILTER_OR",this.list=[],this.parent=n,"FILTER_AND"===t)this.type="FILTER_AND";else{if("FILTER_OR"!==t)throw TypeError("Unexpected type for Group constructor");this.type="FILTER_OR"}},U=function(e){var t=e.conditions;return t.list&&(t.parent=e),function e(t){if(t.list)for(var n=0;n<t.list.length;n++)t.list[n].parent=t,e(t.list[n])}(t),e},S=Object(a.createContext)({tree:null,moveNode:function(e,t){}}),P=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(p.a)(this,Object(u.a)(t).call(this,e))).moveNode=function(e,t){console.info(e,t)},n.addNode=function(e,t){if("rule"===e)t.list.push(new k("TOPIC_ACTION",t)),n.forceUpdate();else{if("group"!==e)throw TypeError("Unexpected node type, cannot be inserted");t.list.push(new w("FILTER_OR",t)),console.info(n.state),n.forceUpdate()}n.forceUpdate()},n.collopaseNode=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"FILTER_OR",a=new w(t,e.parent),r=e.parent.list.findIndex(function(t){return t===e});e.type,e.parent.list[r]=a,a.list=[e],e.parent=a,n.forceUpdate()},n.changeNodeType=function(e,t){e.type=t,n.forceUpdate()},n.removeNode=function(e){var t=e.parent.list.findIndex(function(t){return t===e});e.parent.list.splice(t,1),n.forceUpdate()},n.copyeNode=function(e){var t=e.parent.list.findIndex(function(t){return t===e});console.info(e),e.parent.list.splice(t,0,{type:"FILTER_NODE",action:e.action,range:e.range,parent:e.parent}),n.forceUpdate()},n.state={tree:U(e.filters),moveNode:n.moveNode,addNode:n.addNode,collopaseNode:n.collopaseNode,removeNode:n.removeNode,copyeNode:n.copyeNode,changeNodeType:n.changeNodeType},n}return Object(s.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.state.tree.conditions;return e?r.a.createElement("div",null,r.a.createElement(S.Provider,{value:this.state},r.a.createElement(F,{node:e}))):null}}]),t}(r.a.Component),x=(n(187),{type:"SELECT",selectList:[{type:"COUNT"}],source:{type:"SOURCE_LIST",source:[{type:"SOURCE_NODE",id:"233"}],filters:{type:"WHERE",conditions:{type:"FILTER_AND",list:[{type:"FILTER_OR",list:[{type:"FILTER_NODE",action:{type:"USER_ACTION",detail:{action:{type:"ID_NODE",id:"1"},target:{type:"ID_NODE",id:"2",comment:"\u4f60\u662f\u4e0d\u662f\u50bb\u62a5\u8868"}}},range:{type:"RANGE",from:{type:"TIMESTAMP",value:123},to:{type:"TIMESTAMP",value:456}}},{type:"FILTER_NODE",action:{type:"USER_ACTION",detail:{action:{type:"ID_NODE",id:"13"},target:{type:"ID_NODE",id:"23"}}},range:{type:"RANGE",from:{type:"DATE",value:"2134123"},to:{type:"DATE",value:"23432434"}}}]},{type:"FILTER_OR",list:[{type:"FILTER_NODE",action:{type:"USER_ACTION",detail:{action:{type:"ID_NODE",id:"4"},target:{type:"ID_NODE",id:"5"}}}},{type:"FILTER_NODE",action:{type:"USER_ACTION",detail:{action:{type:"ID_NODE",id:"7"},target:{type:"ID_NODE",id:"8"}}}},{type:"FILTER_NODE",action:{type:"TOPIC_ACTION",detail:{action:{type:"ID_NODE",id:"7"},target:{type:"ID_NODE",id:"8"}}}},{type:"FILTER_AND",list:[{type:"FILTER_NODE",action:{type:"TOPIC_ACTION",detail:{action:{type:"ID_NODE",id:"7"},target:{type:"ID_NODE",id:"8"}}}},{type:"FILTER_NODE",action:{type:"TOPIC_ACTION",detail:{action:{type:"ID_NODE",id:"7"},target:{type:"ID_NODE",id:"8"}}}}]}]}]}}}}),G=function(e){function t(){return Object(i.a)(this,t),Object(p.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(P,{filters:x.source.filters}))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(G,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},49:function(e,t,n){},98:function(e,t,n){}},[[109,2,1]]]);
//# sourceMappingURL=main.chunk.js.map